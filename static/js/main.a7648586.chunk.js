(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{181:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(47),i=n.n(c),o=(n(73),n(5)),l=n(11),s=n(48),d=n.n(s),u=n(6),f=n(49),p=n.n(f),h=n(16),m=n.n(h),b=n(3);function x(){var t=Object(o.a)(["\n  .bar-svg{\n    margin: 0 auto;\n    display: block;\n  }\n\n  .covid-title{\n    text-align: center;\n    font-size: 20px;\n  }\n\n  .date-label, .case-label, .recovered-label, .deaths-label{\n    text-anchor: end;\n  }\n  .case-label, .recovered-label, .deaths-label{\n    font-size: 18px;\n  }\n\n  .date-label{\n    font-size: 23px;\n  }\n  .title-label{\n    font-size: 24px;\n    fill: #575656;\n  }\n\n  .enter.bar{\n    font-size: 12px;\n  }\n\n  @media (max-width: 425px) {\n    .case-label, .recovered-label, .deaths-label{\n      font-size: 10px;\n    }\n    .case-label{\n      margin-top: 10px;\n      position: relative;\n      \n    }\n    .covid-title{\n      width: 45%;\n    }\n    .date-label{\n      font-size: 13px;\n    }\n  \n    .title-label{\n      font-size: 20px;\n    }\n    .enter.bar{\n      font-size: 10px;\n    }\n  }\n"]);return x=function(){return t},t}function v(t){var e=t.barData,n=p()().innerWidth,c=Object(a.useCallback)((function(){return n<1024?.7*n:700}),[n]),i=c()+100;return Object(a.useEffect)((function(){if(Object.keys(e).length){var t=function(t){e[t].map((function(e){return e.country=t,e}))};for(var a in e)t(a);var r=Object.values(e).flat(1/0).reduce((function(t,e){return t[e.date]||(t[e.date]=[]),e.confirmed>0&&t[e.date].push(e),t[e.date].sort((function(t,e){return e.confirmed-t.confirmed})),t}),[]),i=Object.values(r),o=function(){var t=0,e=95,a=20,r=20,o=30,l=475-r-o,s=c(),d=b.e(i[0],(function(t){return m()(t.date)})),u=b.d(i[i.length-1],(function(t){return m()(t.date)})),f=b.h("#bar").append("svg").attr("class","bar-svg").attr("width",s+e+a).attr("height",l+r+o).append("g").attr("transform","translate(".concat(e,",").concat(r,")")),p=b.g().domain([d,u]).range([0,s-60]),h=(f.attr("class","x axis").append("g").call(b.a(p).ticks(b.i.every(n<700?6:3))).attr("transform","translate(0,".concat(l,")")),b.f().range([50,l]).padding(.2)),x=b.b(h);f.append("g").attr("class","y axis").call(x),f.append("text").attr("text-anchor","middle").attr("y",0).attr("x",s/2-40).attr("class","title-label").text("Corona Virus Spread");var v=f.append("text").attr("y",l-80).attr("x",s-65).attr("class","date-label").attr("fill","#575656"),g=f.append("text").attr("y",l-60).attr("x",s-65).attr("class","case-label").attr("fill","#5d99cb"),w=f.append("text").attr("y",l-40).attr("x",s-65).attr("class","recovered-label").attr("fill","#4fc486"),y=f.append("text").attr("y",l-20).attr("x",s-65).attr("class","deaths-label").attr("fill","#b04c3b");function j(t,e){return t.reduce((function(t,n){return t+n[e]}),0)}function O(t){var e=t.slice(0,10),n=b.j().duration(180),a=f.selectAll(".cases").data(e),r=f.selectAll(".bar").data(e),c=f.selectAll(".recovered").data(e),i=f.selectAll(".deaths").data(e);a.exit().attr("class","exit cases").remove(),r.exit().attr("class","exit bar").remove(),c.exit().attr("class","exit recovered").remove(),i.exit().attr("class","exit deaths").remove(),p.domain([0,b.d(e,(function(t){return t.confirmed}))]),h.domain(e.map((function(t){return t.country}))),a.enter().append("rect").attr("class","enter cases").merge(a).transition(n).attr("y",(function(t){return h(t.country)})).attr("width",(function(t){return p(t.confirmed)})).attr("height",(function(t){return h.bandwidth()})).attr("z-index",1).attr("fill","#5d99cb"),r.enter().append("text").attr("class","enter bar").merge(r).transition(n).attr("y",(function(t){return h(t.country)+20})).attr("x",(function(t){return p(t.confirmed)+10})).attr("whiteSpace","nowrap").attr("z-index",6).attr("height",(function(t){return h.bandwidth()})).text((function(t){return t.confirmed.toLocaleString()})).attr("fill","#000"),c.enter().append("rect").attr("class","enter recovered").merge(c).transition(n).attr("y",(function(t){return h(t.country)})).attr("width",(function(t){return p(t.recovered)})).attr("height",(function(t){return h.bandwidth()})).attr("z-index",2).attr("fill","#4fc486"),i.enter().append("rect").attr("class","enter deaths").merge(i).transition(n).attr("y",(function(t){return h(t.country)})).attr("width",(function(t){return p(t.deaths)})).attr("height",(function(t){return h.bandwidth()})).attr("z-index",3).attr("fill","#b04c3b"),f.selectAll(".y.axis").call(x).selectAll(".domain, .tick line").remove(),v.text(m()(t[0].date).format("D MMM")),g.text("Cases: ".concat(j(t,"confirmed").toLocaleString())),w.text("Recovered: ".concat(j(t,"recovered").toLocaleString())),y.text("Deaths: ".concat(j(t,"deaths").toLocaleString()))}b.c((function(){t=t<i.length-1?t+1:0,O(i[t])}),180),O(i[0])};document.getElementsByClassName("bar-svg").length?(document.getElementsByClassName("bar-svg")[0].remove(),o()):o()}}),[e,c]),r.a.createElement(g,null,r.a.createElement("div",{id:"bar",width:i.toFixed().toString(),height:"475"}))}var g=u.a.div(x()),w=n(27),y=n.n(w),j=n(53),O=n(54),k=n.n(O);function E(){var t=Object(o.a)(["\n  width: ",";\n  max-width: ",";\n  display:  block;\n  margin: 20px auto;\n"]);return E=function(){return t},t}function z(t){var e=t.src,n=t.width,a=t.maxWidth,c=t.link;return r.a.createElement("a",{href:c},r.a.createElement(S,{src:e,width:n,maxWidth:a,alt:"","data-testid":"img-link-test-id"}))}var S=u.a.img(E(),(function(t){return t.width}),(function(t){return t.maxWidth})),A=n(55),W=n.n(A),B=n(56),C=n.n(B);function D(){var t=Object(o.a)(["\n  display: block;\n  margin: 0 auto;\n  width: 100px;\n  z-index: 3;\n  background-repeat: no-repeat;\n"]);return D=function(){return t},t}function L(){var t=Object(o.a)(["\n  margin: 0 auto;\n\n  a:link {\n    color: #4fafc0;\n  }\n  \n  a:visited {\n    color: #359987;\n  }\n"]);return L=function(){return t},t}function M(){var t=Object(o.a)(["\n  margin: 30px auto 40px;\n  width: 700px;\n\n  @media(max-width: 700px){\n    width: 95%;\n  }\n"]);return M=function(){return t},t}function I(){var t=Object(a.useState)(!1),e=Object(l.a)(t,2),n=e[0],c=e[1],i=function(t,e){var n=Object(a.useState)(e),r=Object(l.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(null),s=Object(l.a)(o,2),d=s[0],u=s[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k()(t);case 2:n=e.sent,i(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{e()}catch(n){u(n.message)}}),[t]),d&&console.log(d),c}("https://pomber.github.io/covid19/timeseries.json",{});return Object(a.useEffect)((function(){Object.keys(i).length?c(!1):c(!0)}),[i]),r.a.createElement(J,null,r.a.createElement(F,{src:C.a,alt:"",style:{opacity:n?1:0}}),r.a.createElement(v,{barData:i}),r.a.createElement(N,{source:"I was inspired to create this race chart after seeing a version just showing\n the cases in an article on the [BBC](https://www.bbc.co.uk/news/world-51235105). \n I felt it was a missed opportunity to not overlap the additional data.\n ",escapeHtml:!1}),r.a.createElement(z,{src:W.a,width:"600px",maxWidth:"90%",link:"https://www.bbc.co.uk/news/world-51235105"}))}var N=Object(u.a)(d.a)(M()),J=u.a.div(L()),F=u.a.img(D());var H=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},55:function(t,e,n){t.exports=n.p+"static/media/bbc.5362c54a.png"},56:function(t,e,n){t.exports=n.p+"static/media/loading.8f38e258.svg"},68:function(t,e,n){t.exports=n(181)},73:function(t,e,n){}},[[68,1,2]]]);
//# sourceMappingURL=main.a7648586.chunk.js.map